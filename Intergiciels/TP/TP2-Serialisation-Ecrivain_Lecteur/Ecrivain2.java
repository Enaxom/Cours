import java.io.ObjectOutputStream;import java.io.ObjectInputStream;import java.io.FileOutputStream;import java.io.IOException;import java.io.Serializable;class A2 implements Serializable {    public B2 b;    public C2 c;}class B2 implements Serializable {    private D2 d;    private int x = 3;    private String s = "un";    public B2 (int x, String s) {        this.x = x; this.s = s;        this.d = new D2(); this.d.di = 345;    }    public String toString()   { return s + "/" + x + "/" + d.di; }    private void writeObject (ObjectOutputStream flot) throws IOException    {        flot.writeObject (this.s);    }    private void readObject (ObjectInputStream flot)        throws IOException, ClassNotFoundException    {        this.d = new D2();        this.s = (String) flot.readObject();    }    }class C2 implements Serializable {    public int i;    public A2 a;    public C2 suiv;    public C2 (int i, A2 a, C2 suiv) { this.i = i; this.a = a; this.suiv = suiv; }}class D2 /* doesn't implement Serializable */ {    public int di = 31415;}public class Ecrivain2 {    public static void main (String args[]) throws IOException    {        A2 a = new A2();        a.b = new B2 (123, "coucou");        a.c = new C2 (28, null, new C2 (76, a, null));        System.out.println ("B = " + a.b);        System.out.println ("C1.i = " + a.c.i);        System.out.println ("C2.i = " + a.c.suiv.i);        System.out.println ("C3.i = " + a.c.suiv.a.c.i);        ObjectOutputStream flot = new ObjectOutputStream(new FileOutputStream("/tmp/sauve"));        flot.writeObject (a);        flot.close();    }}